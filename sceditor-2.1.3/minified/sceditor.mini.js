!function(){"use strict";function e(e,t){return typeof t===e}var t=e.bind(null,"string"),n=e.bind(null,"undefined"),o=e.bind(null,"function"),i=e.bind(null,"number");function r(e){return!Object.keys(e).length}function a(e,t){for(var o=e===!!e,i=o?2:1,r=o?t:e,s=!!o&&e;i<arguments.length;i++){var c=arguments[i];for(var l in c){var u=c[l];if(!n(u)){var d=null!==u&&"object"==typeof u&&Object.getPrototypeOf(u)===Object.prototype,f=Array.isArray(u);r[l]=s&&(d||f)?a(!0,r[l]||(f?[]:{}),u):u}}}return r}function s(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function c(e,t){if(Array.isArray(e)||"length"in e&&i(e.length))for(var n=0;n<e.length;n++)t(n,e[n]);else Object.keys(e).forEach(function(n){t(n,e[n])})}var l={},u=1,d=3;function f(e){return e=parseFloat(e),isFinite(e)?e:0}function p(e,t,n){var o=(n||document).createElement(e);return c(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function m(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||N(n,t))return n}function h(e,t){return N(e,t)?e:m(e,t)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function v(e,t){e.appendChild(t)}function b(e,t){return e.querySelectorAll(t)}var y=!0;function x(e,n,o,i,r){n.split(" ").forEach(function(n){var a;t(o)?(a=i["_sce-event-"+n+o]||function(t){for(var n=t.target;n&&n!==e;){if(N(n,o))return void i.call(n,t);n=n.parentNode}},i["_sce-event-"+n+o]=a):(a=o,r=i),e.addEventListener(n,a,r||!1)})}function w(e,n,o,i,r){n.split(" ").forEach(function(n){var a;t(o)?a=i["_sce-event-"+n+o]:(a=o,r=i),e.removeEventListener(n,a,r||!1)})}function C(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?k(e,t):e.setAttribute(t,n)}function k(e,t){e.removeAttribute(t)}function S(e){D(e,"display","none")}function E(e){D(e,"display","")}function T(e){L(e)?S(e):E(e)}function D(e,n,o){if(arguments.length<3){if(t(n))return 1===e.nodeType?getComputedStyle(e)[n]:null;c(n,function(t,n){D(e,t,n)})}else{var i=(o||0===o)&&!isNaN(o);e.style[n]=i?o+"px":o}}function M(e,t,n){var o=arguments.length,i={};if(e.nodeType===u){if(1===o)return c(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(i[t.name.substr(5)]=t.value)}),i;if(2===o)return C(e,"data-"+t);C(e,"data-"+t,String(n))}}function N(e,t){var n=!1;return e&&e.nodeType===u&&(n=(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)),n}function R(e,t){return t.parentNode.insertBefore(e,t)}function F(e){return e.className.trim().split(/\s+/)}function H(e,t){return N(e,"."+t)}function _(e,t){var n=F(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function z(e,t){var n=F(e);s(n,t),e.className=n.join(" ")}function O(e,t,o){(o=n(o)?!H(e,t):o)?_(e,t):z(e,t)}function A(e,t){if(n(t)){var o=getComputedStyle(e),i=f(o.paddingLeft)+f(o.paddingRight),r=f(o.borderLeftWidth)+f(o.borderRightWidth);return e.offsetWidth-i-r}D(e,"width",t)}function B(e,t){if(n(t)){var o=getComputedStyle(e),i=f(o.paddingTop)+f(o.paddingBottom),r=f(o.borderTopWidth)+f(o.borderBottomWidth);return e.offsetHeight-i-r}D(e,"height",t)}function I(e,t,n){var i;o(window.CustomEvent)?i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(i=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(i)}function L(e){return!!e.getClientRects().length}function P(e,t,n,o,i){for(e=i?e.lastChild:e.firstChild;e;){var r=i?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===P(e,t,n,o,i)||n&&!1===t(e))return!1;e=r}}function V(e,t,n,o){P(e,t,n,o,!0)}function W(e,t){var n=(t=t||document).createDocumentFragment(),o=p("div",{},t);for(o.innerHTML=e;o.firstChild;)v(n,o.firstChild);return n}function j(e){return e&&(!N(e,"p,div")||e.className||C(e,"style")||!r(M(e)))}function q(e,t){var n=p(t,{},e.ownerDocument);for(c(e.attributes,function(e,t){try{C(n,t.name,t.value)}catch(e){}});e.firstChild;)v(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var U="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|";function $(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function Y(e,t){var n,o=(e||{}).nodeType||d;return o!==u?o===d:"code"===(n=e.tagName.toLowerCase())?!t:U.indexOf("|"+n+"|")<0}function K(e,t){t.style.cssText=e.style.cssText+t.style.cssText}function X(e){P(e,function(e){var t,n=!Y(e,!0);if(n&&Y(e.parentNode,!0)){var o=function(e){for(;Y(e.parentNode,!0);)e=e.parentNode;return e}(e),i=Q(o,e),r=e;K(o,r),R(i,o),R(r,o)}if(n&&N(e,"ul,ol")&&N(e.parentNode,"ul,ol")){var a=("li",(t=e.previousElementSibling)?N(t,"li")?t:null:t);a||R(a=p("li"),e),v(a,e)}})}function G(e,t){return e?(t?e.previousSibling:e.nextSibling)||G(e.parentNode,t):null}function J(e){var t,n,o,i,r,a,s,c=D(e,"whiteSpace"),l=/line$/i.test(c),f=e.firstChild;if(!/pre(\-wrap)?$/i.test(c))for(;f;){if(a=f.nextSibling,t=f.nodeValue,(n=f.nodeType)===u&&f.firstChild&&J(f),n===d){for(o=G(f),i=G(f,!0),s=!1;H(i,"sceditor-ignore");)i=G(i,!0);if(Y(f)&&i){for(r=i;r.lastChild;)for(r=r.lastChild;H(r,"sceditor-ignore");)r=G(r,!0);s=r.nodeType===d?/[\t\n\r ]$/.test(r.nodeValue):!Y(r)}t=t.replace(/\u200B/g,""),i&&Y(i)&&!s||(t=t.replace(l?/^[\t ]+/:/^[\t\n\r ]+/,"")),o&&Y(o)||(t=t.replace(l?/[\t ]+$/:/[\t\n\r ]+$/,"")),t.length?f.nodeValue=t.replace(l?/[\t ]+/g:/[\t\n\r ]+/g," "):g(f)}f=a}}function Q(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function Z(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function ee(e,t){var n,o,i=e.style;if(l[t]||(l[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),o=i[t=l[t]],"textAlign"===t){if(n=i.direction,o=o||D(e,t),D(e.parentNode,t)===o||"block"!==D(e,"display")||N(e,"hr,th"))return"";if(/right/i.test(o)&&"rtl"===n||/left/i.test(o)&&"ltr"===n)return""}return o}var te,ne,oe,ie={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:C(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/smile.png",":angel:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/angel.png",":angry:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/angry.png","8-)":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/cool.png",":'(":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/cwy.png",":ermm:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/ermm.png",":D":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/grin.png","<3":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/heart.png",":(":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/sad.png",":O":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/shocked.png",":P":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/tongue.png",";)":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/wink.png"},more:{":alien:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/alien.png",":blink:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/blink.png",":blush:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/blush.png",":cheerful:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/cheerful.png",":devil:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/devil.png",":dizzy:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/dizzy.png",":getlost:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/getlost.png",":happy:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/happy.png",":kissing:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/kissing.png",":ninja:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/ninja.png",":pinch:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/pinch.png",":pouty:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/pouty.png",":sick:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/sick.png",":sideways:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/sideways.png",":silly:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/silly.png",":sleeping:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/sleeping.png",":unsure:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/unsure.png",":woot:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/w00t.png",":wassat:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/wassat.png"},hidden:{":whistling:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/whistling.png",":love:":"https://omarpop23.github.io/main/sceditor-2.1.3/emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}},re=navigator.userAgent,ae=function(){for(var e=3,t=document,n=t.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",o[0];);return t.documentMode&&t.all&&window.atob&&(e=10),4===e&&t.documentMode&&(e=11),4<e?e:void 0}(),se="-ms-ime-align"in document.documentElement.style,ce=/iPhone|iPod|iPad| wosbrowser\//i.test(re),le=((oe=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===oe.contentEditable&&(ne=/Opera Mobi|Opera Mini/i.test(re),/Android/i.test(re)&&(ne=!0,/Safari/.test(re)&&(ne=!(te=/Safari\/(\d+)/.exec(re))||!te[1]||te[1]<534)),/ Silk\//i.test(re)&&(ne=!(te=/AppleWebKit\/(\d+)/.exec(re))||!te[1]||te[1]<534),ce&&(ne=/OS [0-4](_\d)+ like Mac/i.test(re)),/Firefox/i.test(re)&&(ne=!1),/OneBrowser/i.test(re)&&(ne=!1),"UCWEB"===navigator.vendor&&(ne=!1),ae<=9&&(ne=!0),!ne)),ue=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function de(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function fe(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}var pe={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px} @supports (-ms-ime-align:auto) { * { min-height: auto !important; } }</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function me(e,t,n){var o=pe[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(de("{"+e+"}"),"g"),t[e])}),n&&(o=W(o)),o}var he=ae&&ae<11;function ge(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t&&(t=t.nextSibling)}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(D(n.parentNode,"whiteSpace"))||g(n)),n=t}}var ve={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){if(e&&3===e.nodeType&&(e=e.parentNode),e){var t="ltr"===D(e,"direction"),n=D(e,"textAlign");return"left"===n||n===(t?"start":"end")}},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){if(e&&3===e.nodeType&&(e=e.parentNode),e){var t="ltr"===D(e,"direction"),n=D(e,"textAlign");return"right"===n||n===(t?"end":"start")}},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(e,t,n){var o=p("div");x(o,"click","a",function(t){n(M(this,"font")),e.closeDropDown(!0),t.preventDefault()}),e.opts.fonts.split(",").forEach(function(e){v(o,me("fontOpt",{font:e},!0))}),e.createDropDown(t,"font-picker",o)},exec:function(e){var t=this;ve.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(e,t,n){var o=p("div");x(o,"click","a",function(t){n(M(this,"size")),e.closeDropDown(!0),t.preventDefault()});for(var i=1;i<=7;i++)v(o,me("sizeOpt",{size:i},!0));e.createDropDown(t,"fontsize-picker",o)},exec:function(e){var t=this;ve.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(e,t,n){var o=p("div"),i="",r=ve.color;r._htmlCache||(e.opts.colors.split("|").forEach(function(e){i+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){i+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),i+="</div>"}),r._htmlCache=i),v(o,W(r._htmlCache)),x(o,"click","a",function(t){n(M(this,"color")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"color-picker",o)},exec:function(e){var t=this;ve.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=p("div"),o=this;v(n,me("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),x(n,"click",".button",function(e){(t=b(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){ge(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){ge(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n,o,i;return N(t,"li")?0:N(t,"ul,ol,menu")&&(o=(n=this.getRangeHelper().selectedRange()).startContainer.parentNode,i=n.endContainer.parentNode,o!==o.parentNode.firstElementChild||N(i,"li")&&i!==i.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),h(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return h(t,"ul,ol,menu")?0:-1},exec:function(){h(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var t=this,n=p("div");v(n,me("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0)),x(n,"click",".button",function(e){var o=Number(b(n,"#rows")[0].value),i=Number(b(n,"#cols")[0].value),r="<table>";0<o&&0<i&&(r+=Array(o+1).join("<tr>"+Array(i+1).join("<td>"+(he?"":"<br />")+"</td>")+"</tr>"),r+="</table>",t.wysiwygEditorInsertHtml(r),t.closeDropDown(!0),e.preventDefault())}),t.createDropDown(e,"inserttable",n)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>",(he?"":"<br />")+"</code>")},tooltip:"Code"},image:{_dropDown:function(e,t,n,o){var i=p("div");v(i,me("image",{url:e._("URL:"),width:e._("Width (optional):"),height:e._("Height (optional):"),insert:e._("Insert")},!0));var r=b(i,"#image")[0];r.value=n,x(i,"click",".button",function(t){r.value&&o(r.value,b(i,"#width")[0].value,b(i,"#height")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertimage",i)},exec:function(e){var t=this;ve.image._dropDown(t,e,"",function(e,n,o){var i="";n&&(i+=' width="'+n+'"'),o&&(i+=' height="'+o+'"'),t.wysiwygEditorInsertHtml("<img"+i+' src="'+e+'" />')})},tooltip:"Insert an image"},email:{_dropDown:function(e,t,n){var o=p("div");v(o,me("email",{label:e._("E-mail:"),desc:e._("Description (optional):"),insert:e._("Insert")},!0)),x(o,"click",".button",function(t){var i=b(o,"#email")[0].value;i&&n(i,b(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertemail",o)},exec:function(e){var t=this;ve.email._dropDown(t,e,function(e,n){t.focus(),!t.getRangeHelper().selectedHtml()||n?t.wysiwygEditorInsertHtml('<a href="mailto:'+e+'">'+(n||e)+"</a>"):t.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(e,t,n){var o=p("div");v(o,me("link",{url:e._("URL:"),desc:e._("Description (optional):"),ins:e._("Insert")},!0));var i=b(o,"#link")[0];function r(t){i.value&&n(i.value,b(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}x(o,"click",".button",r),x(o,"keypress",function(e){13===e.which&&i.value&&r(e)},y),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;ve.link._dropDown(t,e,function(e,n){t.focus(),n||!t.getRangeHelper().selectedHtml()?(n=n||e,t.wysiwygEditorInsertHtml('<a href="'+e+'">'+n+"</a>")):t.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return h(this.currentNode(),"a")?0:-1},exec:function(){var e=h(this.currentNode(),"a");if(e){for(;e.firstChild;)R(e.firstChild,e);g(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",i="</blockquote>";t?(o=o+(n=n?"<cite>"+n+"</cite>":"")+t+i,i=null):""===this.getRangeHelper().selectedHtml()&&(i=(he?"":"<br />")+i),this.wysiwygEditorInsertHtml(o,i)},tooltip:"Insert a Quote"},emoticon:{exec:function(e){var t=this,n=function(o){var i,r,s=t.opts,l=s.emoticonsRoot||"",u=s.emoticonsCompat,d=t.getRangeHelper(),f=u&&" "!==d.getOuterText(!0,1)?" ":"",m=u&&" "!==d.getOuterText(!1,1)?" ":"",h=p("div"),g=p("div"),b=a({},s.emoticons.dropdown,o?s.emoticons.more:{});return v(h,g),r=Math.sqrt(Object.keys(b).length),x(h,"click","img",function(e){t.insert(f+C(this,"alt")+m,null,!1).closeDropDown(!0),e.preventDefault()}),c(b,function(e,t){v(g,p("img",{src:l+(t.url||t),alt:e,title:t.tooltip||e})),g.children.length>=r&&(g=p("div"),v(h,g))}),!o&&s.emoticons.more&&(v(i=p("a",{className:"sceditor-more"}),document.createTextNode(t._("More"))),x(i,"click",function(o){t.createDropDown(e,"more-emoticons",n(!0)),o.preventDefault()}),v(h,i)),h};t.createDropDown(e,"emoticons",n(!1))},txtExec:function(e){ve.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var o=p("div");v(o,me("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0)),x(o,"click",".button",function(t){var i=b(o,"#link")[0].value,r=i.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),a=i.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),s=0;a&&c(a[1].split(/[hms]/),function(e,t){""!==t&&(s=60*s+Number(t))}),r&&/^[a-zA-Z0-9_\-]{11}$/.test(r[1])&&n(r[1],s),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;ve.youtube._dropDown(t,e,function(e,n){t.wysiwygEditorInsertHtml(me("youtube",{id:e,time:n}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1,i=t.getDate();return n<2e3&&(n=1900+n),o<10&&(o="0"+o),i<10&&(i="0"+i),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,i)},exec:function(){this.insertText(ve.date._date(this))},txtExec:function(){this.insertText(ve.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),t+":"+n+":"+o},exec:function(){this.insertText(ve.time._time())},txtExec:function(){this.insertText(ve.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!N(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!N(t,"body")))&&D(t,"direction","ltr"===D(t,"direction")?"":"ltr")},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!N(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!N(t,"body")))&&D(t,"direction","rtl"===D(t,"direction")?"":"rtl")},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},be={};function ye(e){var t=this,n=[],o=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},i=function(t,i){t=[].slice.call(t);var r,a,s=o(t.shift());for(r=0;r<n.length;r++)if(s in n[r]&&(a=n[r][s].apply(e,t),i))return a};t.call=function(){i(arguments,!1)},t.callOnlyFirst=function(){return i(arguments,!0)},t.hasHandler=function(e){var t=n.length;for(e=o(e);t--;)if(e in n[t])return!0;return!1},t.exists=function(e){return e in be&&"function"==typeof(e=be[e])&&"object"==typeof e.prototype},t.isRegistered=function(e){if(t.exists(e))for(var o=n.length;o--;)if(n[o]instanceof be[e])return!0;return!1},t.register=function(o){return!(!t.exists(o)||t.isRegistered(o)||(o=new be[o],n.push(o),"init"in o&&o.init.call(e),0))},t.deregister=function(o){var i,r=n.length,a=!1;if(!t.isRegistered(o))return a;for(;r--;)n[r]instanceof be[o]&&(a=!0,"destroy"in(i=n.splice(r,1)[0])&&i.destroy.call(e));return a},t.destroy=function(){for(var t=n.length;t--;)"destroy"in n[t]&&n[t].destroy.call(e);n=[],e=null}}ye.plugins=be;var xe=ae&&ae<11,we=function(e,t,n){var o,i,r,a,s,c="",l=e.startContainer,u=e.startOffset;for(l&&3!==l.nodeType&&(l=l.childNodes[u],u=0),r=a=u;n>c.length&&l&&3===l.nodeType;)o=l.nodeValue,i=n-c.length,s&&(a=o.length,r=0),s=l,t?(u=r=Math.max(a-i,0),c=o.substr(r,a-r)+c,l=s.previousSibling):(u=r+(a=Math.min(i,o.length)),c+=o.substr(r,a),l=s.nextSibling);return{node:s||l,offset:u,text:c}};function Ce(e,t){var n,o,i=t||e.contentDocument||e.document,r="sceditor-start-marker",a="sceditor-end-marker",s=this;s.insertHTML=function(e,t){var n,o;if(!s.selectedRange())return!1;for(t&&(e+=s.selectedHtml()+t),o=p("p",{},i),n=i.createDocumentFragment(),o.innerHTML=e;o.firstChild;)v(n,o.firstChild);s.insertNode(n)},o=function(e,t,o){var c,l=i.createDocumentFragment();if("string"==typeof e?(t&&(e+=s.selectedHtml()+t),l=W(e)):(v(l,e),t&&(v(l,s.selectedRange().extractContents()),v(l,t))),c=l.lastChild){for(;!Y(c.lastChild,!0);)c=c.lastChild;if($(c)?c.lastChild||v(c,document.createTextNode("​")):c=l,s.removeMarkers(),v(c,n(r)),v(c,n(a)),o){var u=p("div");return v(u,l),u.innerHTML}return l}},s.insertNode=function(e,t){var n=o(e,t),i=s.selectedRange(),r=i.commonAncestorContainer;if(!n)return!1;i.deleteContents(),r&&3!==r.nodeType&&!$(r)?R(n,r):i.insertNode(n),s.restoreRange()},s.cloneSelected=function(){var e=s.selectedRange();if(e)return e.cloneRange()},s.selectedRange=function(){var t,n,o=e.getSelection();if(o){if(o.rangeCount<=0){for(n=i.body;n.firstChild;)n=n.firstChild;(t=i.createRange()).setStartBefore(n),o.addRange(t)}return 0<o.rangeCount&&(t=o.getRangeAt(0)),t}},s.hasSelection=function(){var t=e.getSelection();return t&&0<t.rangeCount},s.selectedHtml=function(){var e,t=s.selectedRange();return t?(v(e=p("p",{},i),t.cloneContents()),e.innerHTML):""},s.parentNode=function(){var e=s.selectedRange();if(e)return e.commonAncestorContainer},s.getFirstBlockParent=function(e){var t=function(e){return Y(e,!0)&&(e=e?e.parentNode:null)?t(e):e};return t(e||s.parentNode())},s.insertNodeAt=function(e,t){var n=s.selectedRange(),o=s.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),s.selectRange(n)},n=function(e){s.removeMarker(e);var t=p("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},i);return t.innerHTML=" ",t},s.insertMarkers=function(){var e=s.selectedRange(),t=n(r);s.removeMarkers(),s.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(n(a),t.nextSibling):s.insertNodeAt(!1,n(a))},s.getMarker=function(e){return i.getElementById(e)},s.removeMarker=function(e){var t=s.getMarker(e);t&&g(t)},s.removeMarkers=function(){s.removeMarker(r),s.removeMarker(a)},s.saveRange=function(){s.insertMarkers()},s.selectRange=function(t){var n,o=e.getSelection(),r=t.endContainer;if(!xe&&t.collapsed&&r&&!Y(r,!0)){for(n=r.lastChild;n&&N(n,".sceditor-ignore");)n=n.previousSibling;if(N(n,"br")){var a=i.createRange();a.setEndAfter(n),a.collapse(!1),s.compare(t,a)&&(t.setStartBefore(n),t.collapse(!0))}}o&&(s.clear(),o.addRange(t))},s.restoreRange=function(){var e,t=s.selectedRange(),n=s.getMarker(r),o=s.getMarker(a);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=i.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),s.selectRange(t),s.removeMarkers()},s.selectOuterText=function(e,t){var n,o,i=s.cloneSelected();if(!i)return!1;i.collapse(!1),n=we(i,!0,e),o=we(i,!1,t),i.setStart(n.node,n.offset),i.setEnd(o.node,o.offset),s.selectRange(i)},s.getOuterText=function(e,t){var n=s.cloneSelected();return n?(n.collapse(!e),we(n,e,t).text):""},s.replaceKeyword=function(e,t,n,o,i,r){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,c,l,u,d,f,p,m,h="(^|[\\s    ])",g=e.length,v=i?1:0,b=o||e[g-1][0].length;for(i&&b++,r=r||"",d=(a=s.getOuterText(!0,b)).length,a+=r,t&&(a+=s.getOuterText(!1,b));g--;)if(m=(p=e[g][0]).length,u=Math.max(0,d-m-v),l=-1,i?(c=a.substr(u).match(new RegExp(h+de(p)+h)))&&(l=c.index+u+c[1].length):l=a.indexOf(p,u),-1<l&&l<=d&&d<=l+m+v)return f=d-l,s.selectOuterText(f,m-f-(/^\S/.test(r)?1:0)),s.insertHTML(e[g][1]),!0;return!1},s.compare=function(e,t){return t||(t=s.selectedRange()),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},s.clear=function(){var t=e.getSelection();t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}}var ke=window,Se=document,Ee=ae,Te=Ee&&Ee<11,De=/^image\/(p?jpe?g|gif|png|bmp)$/i;function Me(e,i){var r,l,f,k,F,U,K,G,Q,ee,te,ne,oe,re,ae,ue,pe,he,ge,be,xe,we,Ne,Re,Fe,He,_e,ze,Oe,Ae,Be,Ie,Le,Pe,Ve,We,je,qe,Ue,$e,Ye,Ke,Xe,Ge,Je,Qe,Ze,et,tt,nt,ot,it,rt,at,st,ct,lt,ut,dt,ft,pt,mt,ht,gt=this,vt={},bt=[],yt=[],xt={},wt={},Ct={};gt.commands=a(!0,{},i.commands||ve);var kt=gt.opts=a(!0,{},ie,i);gt.opts.emoticons=i.emoticons||ie.emoticons,_e=function(){e._sceditor=gt,kt.locale&&"en"!==kt.locale&&Le(),R(l=p("div",{className:"sceditor-container"}),e),D(l,"z-index",kt.zIndex),Ee&&_(l,"ie ie"+Ee),be=e.required,e.required=!1;var t=Me.formats[kt.format];"init"in(r=t?new t:{})&&r.init.call(gt),Ie(),qe(),Pe(),Be(),Ve(),We(),le||gt.toggleSourceMode(),nt();var n=function(){w(ke,"load",n),kt.autofocus&&st(),ht(),it(),ae.call("ready"),"onReady"in r&&r.onReady.call(gt)};x(ke,"load",n),"complete"===Se.readyState&&n()},Ie=function(){var e=kt.plugins;e=e?e.toString().split(","):[],ae=new ye(gt),e.forEach(function(e){ae.register(e.trim())})},Le=function(){var e;(oe=Me.locale[kt.locale])||(e=kt.locale.split("-"),oe=Me.locale[e[0]]),oe&&oe.dateFormat&&(kt.dateFormat=oe.dateFormat)},Be=function(){G=p("textarea"),k=p("iframe",{frameborder:0,allowfullscreen:!0}),kt.startInSourceMode?(_(l,"sourceMode"),S(k)):(_(l,"wysiwygMode"),S(G)),kt.spellcheck||C(l,"spellcheck","false"),"https:"===ke.location.protocol&&C(k,"src","javascript:false"),v(l,k),v(l,G),gt.dimensions(kt.width||A(e),kt.height||B(e));var t=Ee?"ie ie"+Ee:"";t+=ce?" ios":"",(K=k.contentDocument).open(),K.write(me("html",{attrs:' class="'+t+'"',spellcheck:kt.spellcheck?"":'spellcheck="false"',charset:kt.charset,style:kt.style})),K.close(),U=K.body,F=k.contentWindow,gt.readOnly(!!kt.readOnly),(ce||se||Ee)&&(B(U,"100%"),Ee||x(U,"touchend",gt.focus));var n=C(e,"tabindex");C(G,"tabindex",n),C(k,"tabindex",n),re=new Ce(F),S(e),gt.val(e.value);var o=kt.placeholder||C(e,"placeholder");o&&(G.placeholder=o,C(U,"placeholder",o))},Ve=function(){kt.autoUpdate&&(x(U,"blur",mt),x(G,"blur",mt)),null===kt.rtl&&(kt.rtl="rtl"===D(G,"direction")),gt.rtl(!!kt.rtl),kt.autoExpand&&(x(U,"load",ht,y),x(U,"input keyup",ht)),kt.resizeEnabled&&je(),C(l,"id",kt.id),gt.emoticons(kt.emoticonsEnabled)},We=function(){var t=e.form,n="compositionstart compositionend",o="keydown keyup keypress focus blur contextmenu",i="onselectionchange"in K?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";x(Se,"click",et),t&&(x(t,"reset",Ge),x(t,"submit",gt.updateOriginal,y)),x(U,"keypress",Xe),x(U,"keydown",Ye),x(U,"keydown",Ke),x(U,"keyup",it),x(U,"blur",ft),x(U,"keyup",pt),x(U,"paste",Ue),x(U,n,Qe),x(U,i,rt),x(U,o,Ze),kt.emoticonsCompat&&ke.getSelection&&x(U,"keyup",lt),x(U,"blur",function(){gt.val()||_(U,"placeholder")}),x(U,"focus",function(){z(U,"placeholder")}),x(G,"blur",ft),x(G,"keyup",pt),x(G,"keydown",Ye),x(G,n,Qe),x(G,o,Ze),x(K,"mousedown",Je),x(K,i,rt),x(K,"beforedeactivate keyup mouseup",Ae),x(K,"keyup",it),x(K,"focus",function(){ee=null}),x(l,"selectionchanged",at),x(l,"selectionchanged",nt),x(l,"selectionchanged valuechanged nodechanged pasteraw paste",Ze)},Pe=function(){var e,n=gt.commands,o=(kt.toolbarExclude||"").split(","),i=kt.toolbar.split("|");f=p("div",{className:"sceditor-toolbar",unselectable:"on"}),kt.icons in Me.icons&&(He=new Me.icons[kt.icons]),c(i,function(i,r){e=p("div",{className:"sceditor-group"}),c(r.split(","),function(i,r){var a,s,c=n[r];!c||-1<o.indexOf(r)||(s=c.shortcut,a=me("toolbarButton",{name:r,dispName:gt._(c.name||c.tooltip||r)},!0).firstChild,He&&He.create&&He.create(r)&&(R(He.create(r),a.firstChild),_(a,"has-icon")),a._sceTxtMode=!!c.txtExec,a._sceWysiwygMode=!!c.exec,O(a,"disabled",!c.exec),x(a,"click",function(e){H(a,"disabled")||Oe(a,c),nt(),e.preventDefault()}),x(a,"mousedown",function(e){gt.closeDropDown(),e.preventDefault()}),c.tooltip&&C(a,"title",gt._(c.tooltip)+(s?" ("+s+")":"")),s&&gt.addShortcut(s,r),c.state?yt.push({name:r,state:c.state}):t(c.exec)&&yt.push({name:r,state:c.exec}),v(e,a),wt[r]=a)}),e.firstChild&&v(f,e)}),v(kt.toolbarContainer||l,f)},je=function(){var e,t,n,o,i,r,a=p("div",{className:"sceditor-grip"}),s=p("div",{className:"sceditor-resize-cover"}),c="touchmove mousemove",u="touchcancel touchend mouseup",d=0,f=0,m=0,h=0,g=0,b=0,y=A(l),C=B(l),k=!1,T=gt.rtl();if(e=kt.resizeMinHeight||C/1.5,t=kt.resizeMaxHeight||2.5*C,n=kt.resizeMinWidth||y/1.25,o=kt.resizeMaxWidth||1.25*y,i=function(i){"touchmove"===i.type?(i=ke.event,m=i.changedTouches[0].pageX,h=i.changedTouches[0].pageY):(m=i.pageX,h=i.pageY);var r=b+(h-f),a=T?g-(m-d):g+(m-d);0<o&&o<a&&(a=o),0<n&&a<n&&(a=n),kt.resizeWidth||(a=!1),0<t&&t<r&&(r=t),0<e&&r<e&&(r=e),kt.resizeHeight||(r=!1),(a||r)&&gt.dimensions(a,r),i.preventDefault()},r=function(e){k&&(k=!1,S(s),z(l,"resizing"),w(Se,c,i),w(Se,u,r),e.preventDefault())},He&&He.create){var D=He.create("grip");D&&(v(a,D),_(a,"has-icon"))}v(l,a),v(l,s),S(s),x(a,"touchstart mousedown",function(e){"touchstart"===e.type?(e=ke.event,d=e.touches[0].pageX,f=e.touches[0].pageY):(d=e.pageX,f=e.pageY),g=A(l),b=B(l),k=!0,_(l,"resizing"),E(s),x(Se,c,i),x(Se,u,r),e.preventDefault()})},qe=function(){var e=kt.emoticons,t=kt.emoticonsRoot||"";e&&(Ct=a({},e.more,e.dropdown,e.hidden)),c(Ct,function(e,n){Ct[e]=me("emoticon",{key:e,url:t+(n.url||n),tooltip:n.tooltip||e}),kt.emoticonsEnabled&&bt.push(p("img",{src:t+(n.url||n)}))})},st=function(){var e,t,n=U.firstChild,o=!!kt.autofocusEnd;if(L(l)){if(gt.sourceMode())return t=o?G.value.length:0,void G.setSelectionRange(t,t);if(J(U),o)for((n=U.lastChild)||(n=p("p",{},K),v(U,n));n.lastChild;)n=n.lastChild,!Te&&N(n,"br")&&n.previousSibling&&(n=n.previousSibling);e=K.createRange(),$(n)?e.selectNodeContents(n):(e.setStartBefore(n),o&&e.setStartAfter(n)),e.collapse(!o),re.selectRange(e),he=e,o&&(U.scrollTop=U.scrollHeight),gt.focus()}},gt.readOnly=function(e){return"boolean"!=typeof e?!G.readonly:(U.contentEditable=!e,G.readonly=!e,tt(e),gt)},gt.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===C(G,"dir"):(C(U,"dir",t),C(G,"dir",t),z(l,"rtl"),z(l,"ltr"),_(l,t),He&&He.rtl&&He.rtl(e),gt)},tt=function(e){var t=gt.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";c(wt,function(n,o){O(o,"disabled",e||!o[t])})},gt.width=function(e,t){return e||0===e?(gt.dimensions(e,null,t),gt):A(l)},gt.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:gt.width(),height:gt.height()}:(!1!==e&&(!1!==n&&(kt.width=e),A(l,e)),!1!==t&&(!1!==n&&(kt.height=t),B(l,t)),gt)},gt.height=function(e,t){return e||0===e?(gt.dimensions(null,e,t),gt):B(l)},gt.maximize=function(e){var t="sceditor-maximize";return n(e)?H(l,t):((e=!!e)&&(Re=ke.pageYOffset),O(Se.documentElement,t,e),O(Se.body,t,e),O(l,t,e),gt.width(e?"100%":kt.width,!1),gt.height(e?"100%":kt.height,!1),e||ke.scrollTo(0,Re),ht(),gt)},ht=function(){kt.autoExpand&&!Ne&&(Ne=setTimeout(gt.expandToContent,200))},gt.expandToContent=function(t){if(!gt.maximize()){if(clearTimeout(Ne),Ne=!1,!we){var n=kt.resizeMinHeight||kt.height||B(e);we={min:n,max:kt.resizeMaxHeight||2*n}}var o=Se.createRange();o.selectNodeContents(U);var i=o.getBoundingClientRect(),r=K.documentElement.clientHeight-1,a=i.bottom-i.top,s=gt.height()+1+(a-r);t||-1===we.max||(s=Math.min(s,we.max)),gt.height(Math.ceil(Math.max(s,we.min)))}},gt.destroy=function(){if(ae){ae.destroy(),ae=ee=re=null,Q&&g(Q),w(Se,"click",et);var t=e.form;t&&(w(t,"reset",Ge),w(t,"submit",gt.updateOriginal)),g(G),g(f),g(l),delete e._sceditor,E(e),e.required=be}},gt.createDropDown=function(e,t,n,o){var i,r="sceditor-"+t;gt.closeDropDown(!0),Q&&H(Q,r)||(!1!==o&&c(b(n,":not(input):not(textarea)"),function(e,t){t.nodeType===u&&C(t,"unselectable","on")}),i=a({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},kt.dropDownCss),D(Q=p("div",{className:"sceditor-dropdown "+r}),i),v(Q,n),v(l,Q),x(Q,"click focusin",function(e){e.stopPropagation()}),setTimeout(function(){if(Q){var e=b(Q,"input,textarea")[0];e&&e.focus()}}))},et=function(e){3!==e.which&&Q&&!e.defaultPrevented&&(mt(),gt.closeDropDown())},Ue=function(e){var t,n,o=Ee||se,i=U,r=e.clipboardData;if(r&&!o){var a={},s=r.types,c=r.items;e.preventDefault();for(var l=0;l<s.length;l++){if(ke.FileReader&&c&&De.test(c[l].type))return t=r.items[l].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){$e({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);a[s[l]]=r.getData(s[l])}a.text=a["text/plain"],a.html=a["text/html"],$e(a)}else if(!Fe){var u=i.scrollTop;for(re.saveRange(),Fe=Se.createDocumentFragment();i.firstChild;)v(Fe,i.firstChild);setTimeout(function(){var e=i.innerHTML;i.innerHTML="",v(i,Fe),i.scrollTop=u,Fe=!1,re.restoreRange(),$e({html:e})},0)}},$e=function(e){var t=p("div",{},K);ae.call("pasteRaw",e),I(l,"pasteraw",e),e.html?(t.innerHTML=e.html,X(t)):t.innerHTML=fe(e.text||"");var n={val:t.innerHTML};"fragmentToSource"in r&&(n.val=r.fragmentToSource(n.val,K,ue)),ae.call("paste",n),I(l,"paste",n),"fragmentToHtml"in r&&(n.val=r.fragmentToHtml(n.val,ue)),ae.call("pasteHtml",n),gt.wysiwygEditorInsertHtml(n.val,null,!0)},gt.closeDropDown=function(e){Q&&(g(Q),Q=null),!0===e&&gt.focus()},gt.wysiwygEditorInsertHtml=function(e,t,n){var o,i,r,a=B(k);gt.focus(),!n&&h(pe,"code")||(re.insertHTML(e,t),re.saveRange(),ze(),E(o=b(U,"#sceditor-end-marker")[0]),i=U.scrollTop,r=Z(o).top+1.5*o.offsetHeight-a,S(o),(i<r||r+a<i)&&(U.scrollTop=r),dt(!1),re.restoreRange(),it())},gt.wysiwygEditorInsertText=function(e,t){gt.wysiwygEditorInsertHtml(fe(e),fe(t))},gt.insertText=function(e,t){return gt.inSourceMode()?gt.sourceEditorInsertText(e,t):gt.wysiwygEditorInsertText(e,t),gt},gt.sourceEditorInsertText=function(e,t){var n,o,i=G.selectionStart,r=G.selectionEnd;n=G.scrollTop,G.focus(),o=G.value,t&&(e+=o.substring(i,r)+t),G.value=o.substring(0,i)+e+o.substring(r,o.length),G.selectionStart=i+e.length-(t?t.length:0),G.selectionEnd=G.selectionStart,G.scrollTop=n,G.focus(),dt()},gt.getRangeHelper=function(){return re},gt.sourceEditorCaret=function(e){return G.focus(),e?(G.selectionStart=e.start,G.selectionEnd=e.end,this):{start:G.selectionStart,end:G.selectionEnd}},gt.val=function(e,n){return t(e)?(gt.inSourceMode()?gt.setSourceEditorValue(e):(!1!==n&&"toHtml"in r&&(e=r.toHtml(e)),gt.setWysiwygEditorValue(e)),gt):gt.inSourceMode()?gt.getSourceEditorValue(!1):gt.getWysiwygEditorValue(n)},gt.insert=function(e,t,n,o,i){if(gt.inSourceMode())return gt.sourceEditorInsertText(e,t),gt;if(t){var a=re.selectedHtml();!1!==n&&"fragmentToSource"in r&&(a=r.fragmentToSource(a,K,ue)),e+=a+t}return!1!==n&&"fragmentToHtml"in r&&(e=r.fragmentToHtml(e,ue)),!1!==n&&!0===i&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),gt.wysiwygEditorInsertHtml(e),gt},gt.getWysiwygEditorValue=function(e){for(var t,n=p("div",{},K),o=U.childNodes,i=0;i<o.length;i++)v(n,o[i].cloneNode(!0));return v(U,n),X(n),g(n),t=n.innerHTML,!1!==e&&r.hasOwnProperty("toSource")&&(t=r.toSource(t,K)),t},gt.getBody=function(){return U},gt.getContentAreaContainer=function(){return k},gt.getSourceEditorValue=function(e){var t=G.value;return!1!==e&&"toHtml"in r&&(t=r.toHtml(t)),t},gt.setWysiwygEditorValue=function(e){e||(e="<p>"+(Ee?"":"<br />")+"</p>"),U.innerHTML=e,ze(),it(),dt(),ht()},gt.setSourceEditorValue=function(e){G.value=e,dt()},gt.updateOriginal=function(){e.value=gt.val()},ze=function(){var e,t,n,o,i,r,a;kt.emoticonsEnabled&&(e=U,t=Ct,n=kt.emoticonsCompat,o=e.ownerDocument,i="(^|\\s| | | | |$)",r=[],a={},m(e,"code")||(c(t,function(e){a[e]=new RegExp(i+de(e)+i),r.push(e)}),r.sort(function(e,t){return t.length-e.length}),function e(i){for(i=i.firstChild;i;){if(i.nodeType!==u||N(i,"code")||e(i),i.nodeType===d)for(var s=0;s<r.length;s++){var c=i.nodeValue,l=r[s],f=n?c.search(a[l]):c.indexOf(l);if(-1<f){var p=c.indexOf(l,f),m=W(t[l],o),h=c.substr(p+l.length);m.appendChild(o.createTextNode(h)),i.nodeValue=c.substr(0,p),i.parentNode.insertBefore(m,i.nextSibling)}}i=i.nextSibling}}(e)))},gt.inSourceMode=function(){return H(l,"sourceMode")},gt.sourceMode=function(e){var t=gt.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&gt.toggleSourceMode(),gt)},gt.toggleSourceMode=function(){var e=gt.inSourceMode();!le&&e||(e||(re.saveRange(),re.clear()),gt.blur(),e?gt.setWysiwygEditorValue(gt.getSourceEditorValue()):gt.setSourceEditorValue(gt.getWysiwygEditorValue()),ee=null,T(G),T(k),O(l,"wysiwygMode",e),O(l,"sourceMode",!e),tt(),nt())},ot=function(){return G.focus(),G.value.substring(G.selectionStart,G.selectionEnd)},Oe=function(e,t){gt.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?gt.sourceEditorInsertText.apply(gt,t.txtExec):t.txtExec.call(gt,e,ot())):t.exec&&(o(t.exec)?t.exec.call(gt,e):gt.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},Ae=function(){Ee&&(ee=re.selectedRange())},gt.execCommand=function(e,t){var n=!1,o=gt.commands[e];if(gt.focus(),!h(re.parentNode(),"code")){try{n=K.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(gt._(o.errorMessage)),nt()}},rt=function(){function e(){if(F.getSelection()&&F.getSelection().rangeCount<=0)he=null;else if(re&&!re.compare(he)){if((he=re.cloneSelected())&&he.collapsed){var e=he.startContainer,t=he.startOffset;for(t&&e.nodeType!==d&&(e=e.childNodes[t]);e&&e.parentNode!==U;)e=e.parentNode;e&&Y(e,!0)&&(re.saveRange(),n=K,P(U,function(e){Y(e,!0)?(o||R(o=p("p",{},n),e),e.nodeType===d&&""===e.nodeValue||v(o,e)):o=null},!1,!0),re.restoreRange())}I(l,"selectionchanged")}var n,o;ge=!1}ge||(ge=!0,"onselectionchange"in K?e():setTimeout(e,100))},at=function(){var e,t=re.parentNode();ue!==t&&(e=ue,ue=t,pe=re.getFirstBlockParent(t),I(l,"nodechanged",{oldNode:e,newNode:ue}))},gt.currentNode=function(){return ue},gt.currentBlockNode=function(){return pe},nt=function(){var e,n,o="active",i=K,r=gt.sourceMode();if(gt.readOnly())c(b(f,o),function(e,t){z(t,o)});else{r||(n=re.parentNode(),e=re.getFirstBlockParent(n));for(var a=0;a<yt.length;a++){var s=0,l=wt[yt[a].name],u=yt[a].state,d=r&&!l._sceTxtMode||!r&&!l._sceWysiwygMode;if(t(u)){if(!r)try{-1<(s=i.queryCommandEnabled(u)?0:-1)&&(s=i.queryCommandState(u)?1:0)}catch(e){}}else d||(s=u.call(gt,n,e));O(l,"disabled",d||s<0),O(l,o,0<s)}He&&He.update&&He.update(r,n,e)}},Xe=function(e){if(!e.defaultPrevented&&(gt.closeDropDown(),13===e.which)&&!N(pe,"li,ul,ol")&&j(pe)){ee=null;var t=p("br",{},K);if(re.insertNode(t),!Te){var n=t.parentNode,o=n.lastChild;o&&o.nodeType===d&&""===o.nodeValue&&(g(o),o=n.lastChild),!Y(n,!0)&&o===t&&Y(t.previousSibling)&&re.insertHTML("<br>")}e.preventDefault()}},it=function(){V(U,function(e){if(e.nodeType===u&&!/inline/.test(D(e,"display"))&&!N(e,".sceditor-nlf")&&j(e)){var t=p("p",{},K);return t.className="sceditor-nlf",t.innerHTML=Te?"":"<br />",v(U,t),!1}if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||N(e,"br"))return!1})},Ge=function(){gt.val(e.value)},Je=function(){gt.closeDropDown(),ee=null},gt._=function(){var e=arguments;return oe&&oe[e[0]]&&(e[0]=oe[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return void 0!==e[n-0+1]?e[n-0+1]:"{"+n+"}"})},Ze=function(e){ae&&ae.call(e.type+"Event",e,gt);var t=(e.target===G?"scesrc":"scewys")+e.type;vt[t]&&vt[t].forEach(function(t){t.call(gt,e)})},gt.bind=function(e,t,n,i){for(var r=(e=e.split(" ")).length;r--;)if(o(t)){var a="scewys"+e[r],s="scesrc"+e[r];n||(vt[a]=vt[a]||[],vt[a].push(t)),i||(vt[s]=vt[s]||[],vt[s].push(t)),"valuechanged"===e[r]&&(dt.hasHandler=!0)}return gt},gt.unbind=function(e,t,n,i){for(var r=(e=e.split(" ")).length;r--;)o(t)&&(n||s(vt["scewys"+e[r]]||[],t),i||s(vt["scesrc"+e[r]]||[],t));return gt},gt.blur=function(e,t,n){return o(e)?gt.bind("blur",e,t,n):gt.sourceMode()?G.blur():U.blur(),gt},gt.focus=function(e,t,n){if(o(e))gt.bind("focus",e,t,n);else if(gt.inSourceMode())G.focus();else{if(b(K,":focus").length)return;var i,r=re.selectedRange();he||st(),!Te&&r&&1===r.endOffset&&r.collapsed&&(i=r.endContainer)&&1===i.childNodes.length&&N(i.firstChild,"br")&&(r.setStartBefore(i.firstChild),r.collapse(!0),re.selectRange(r)),F.focus(),U.focus(),ee&&(re.selectRange(ee),ee=null)}return nt(),gt},gt.keyDown=function(e,t,n){return gt.bind("keydown",e,t,n)},gt.keyPress=function(e,t,n){return gt.bind("keypress",e,t,n)},gt.keyUp=function(e,t,n){return gt.bind("keyup",e,t,n)},gt.nodeChanged=function(e){return gt.bind("nodechanged",e,!1,!0)},gt.selectionChanged=function(e){return gt.bind("selectionchanged",e,!1,!0)},gt.valueChanged=function(e,t,n){return gt.bind("valuechanged",e,t,n)},ct=function(e){var t=0,n=gt.emoticonsCache,o=String.fromCharCode(e.which);h(pe,"code")||(n||(n=[],c(Ct,function(e,o){n[t++]=[e,o]}),n.sort(function(e,t){return e[0].length-t[0].length}),gt.emoticonsCache=n,gt.longestEmoticonCode=n[n.length-1][0].length),re.replaceKeyword(gt.emoticonsCache,!0,!0,gt.longestEmoticonCode,kt.emoticonsCompat,o)&&(kt.emoticonsCompat&&/^\s$/.test(o)||e.preventDefault()))},lt=function(){!function(e,t){var n=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/,o=e&&b(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var i=0;i<o.length;i++){var r=o[i],a=r.parentNode,s=r.previousSibling,c=r.nextSibling;if(s&&n.test(s.nodeValue.slice(-1))||c&&n.test((c.nodeValue||"")[0])){var l=t.cloneSelected(),u=-1,f=l.startContainer,p=s.nodeValue;null===p&&(p=s.innerText||""),p+=M(r,"sceditor-emoticon"),f===c&&(u=p.length+l.startOffset),f===e&&e.childNodes[l.startOffset]===c&&(u=p.length),f===s&&(u=l.startOffset),c&&c.nodeType===d||(c=a.insertBefore(a.ownerDocument.createTextNode(""),c)),c.insertData(0,p),g(s),g(r),-1<u&&(l.setStart(c,u),l.collapse(!0),t.selectRange(l))}}}(pe,re)},gt.emoticons=function(e){return e||!1===e?((kt.emoticonsEnabled=e)?(x(U,"keypress",ct),gt.sourceMode()||(re.saveRange(),ze(),dt(!1),re.restoreRange())):(c(b(U,"img[data-sceditor-emoticon]"),function(e,t){var n=M(t,"sceditor-emoticon"),o=K.createTextNode(n);t.parentNode.replaceChild(o,t)}),w(U,"keypress",ct),dt()),gt):kt.emoticonsEnabled},gt.css=function(e){return xe||(xe=p("style",{id:"inline"},K),v(K.head,xe)),t(e)?(xe.styleSheet?xe.styleSheet.cssText=e:xe.innerHTML=e,gt):xe.styleSheet?xe.styleSheet.cssText:xe.innerHTML},Ye=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},i=e.which,r={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[i]||String.fromCharCode(i).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[i]?r=o[i]:n[r]&&(r=n[r])),r&&(i<16||18<i)&&t.push(r),t=t.join("+"),xt[t]&&!1===xt[t].call(gt)&&(e.stopPropagation(),e.preventDefault())},gt.addShortcut=function(e,n){return e=e.toLowerCase(),t(n)?xt[e]=function(){return Oe(wt[n],gt.commands[n]),!1}:xt[e]=n,gt},gt.removeShortcut=function(e){return delete xt[e.toLowerCase()],gt},Ke=function(e){var t,n,o;if(!kt.disableBlockRemove&&8===e.which&&(n=re.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=ut())&&!N(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==d||t.nodeValue)return;if(!(t=t.parentNode))return}gt.clearBlockFormatting(o),e.preventDefault()}},ut=function(){for(var e=pe;!j(e)||Y(e,!0);)if(!(e=e.parentNode)||N(e,"body"))return;return e},gt.clearBlockFormatting=function(e){return!(e=e||ut())||N(e,"body")||(re.saveRange(),e.className="",ee=null,C(e,"style",""),N(e,"p,div,td")||q(e,"p"),re.restoreRange()),gt},dt=function(e){if(ae&&(ae.hasHandler("valuechangedEvent")||dt.hasHandler)){var t,n=gt.sourceMode(),o=!n&&re.hasSelection();e=(te=!1)!==e&&!K.getElementById("sceditor-start-marker"),ne&&(clearTimeout(ne),ne=!1),o&&e&&re.saveRange(),(t=n?G.value:U.innerHTML)!==dt.lastVal&&(dt.lastVal=t,I(l,"valuechanged",{rawValue:n?gt.val():t})),o&&e&&re.removeMarkers()}},ft=function(){ne&&dt()},pt=function(e){var t=e.which,n=pt.lastChar,o=13===n||32===n,i=8===n||46===n;pt.lastChar=t,te||(13===t||32===t?o?pt.triggerNext=!0:dt():8===t||46===t?i?pt.triggerNext=!0:dt():pt.triggerNext&&(dt(),pt.triggerNext=!1),clearTimeout(ne),ne=setTimeout(function(){te||dt()},1500))},Qe=function(e){(te=/start/i.test(e.type))||dt()},mt=function(){gt.updateOriginal()},_e()}Me.locale={},Me.formats={},Me.icons={},Me.command={get:function(e){return ve[e]||null},set:function(e,t){return!(!e||!t)&&((t=a(ve[e]||{},t)).remove=function(){Me.command.remove(e)},ve[e]=t,this)},remove:function(e){return ve[e]&&delete ve[e],this}},window.sceditor={command:Me.command,commands:ve,defaultOptions:ie,ie:ae,ios:ce,isWysiwygSupported:le,regexEscape:de,escapeEntities:fe,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!ue.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:D,attr:C,removeAttr:k,is:N,closest:h,width:A,height:B,traverse:P,rTraverse:V,parseHTML:W,hasStyling:j,convertElement:q,blockLevelList:U,canHaveChildren:$,isInline:Y,copyCSS:K,fixNesting:X,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==(o=t)&&n.contains&&n.contains(o))return e;var n,o},getSibling:G,removeWhiteSpace:J,extractContents:Q,getOffset:Z,getStyle:ee,hasStyle:function(e,t,n){var o=ee(e,t);return!!o&&(!n||o===n||Array.isArray(n)&&-1<n.indexOf(o))}},locale:Me.locale,icons:Me.icons,utils:{each:c,isEmptyObject:r,extend:a},plugins:ye.plugins,formats:Me.formats,create:function(e,t){t=t||{},m(e,".sceditor-container")||(t.runWithoutWysiwygSupport||le)&&new Me(e,t)},instance:function(e){return e._sceditor}}}();